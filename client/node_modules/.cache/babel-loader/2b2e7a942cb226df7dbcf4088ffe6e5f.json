{"ast":null,"code":"import { $authHost, $host } from \"./index\";\nimport jwt_decode from 'jwt-decode';\nexport const registration = async (login, email, password) => {\n  const {\n    data\n  } = await $host.post('api/user/registration', {\n    login,\n    email,\n    password\n  });\n\n  if (data.code == 500) {\n    localStorage.setItem('token', data.token);\n    return jwt_decode(data.token);\n  }\n\n  ;\n  return data.code;\n};\nexport const login = async (loginOrEmail, password) => {\n  const {\n    data\n  } = await $host.post('api/user/login', {\n    loginOrEmail,\n    password\n  });\n\n  if (data.code == 500) {\n    localStorage.setItem('token', data.token);\n    let decodeToken = jwt_decode(data.token);\n    console.log(localStorage.getItem('token'));\n    return {\n      user: decodeToken.id,\n      code: data.code\n    };\n  }\n\n  ;\n  console.log(data.token);\n  return data.code;\n};\nexport const check = async () => {\n  try {\n    const {\n      data\n    } = await $authHost.get('api/user/auth');\n    localStorage.setItem('token', data.token);\n    return jwt_decode(data.token);\n  } catch (e) {\n    console.log(e);\n    console.log('error in userApi.Check');\n  }\n}; //\n// import {$authHost, $host} from \"./index\";\n// import jwt_decode from \"jwt-decode\";\n//\n// export const registration = async (email, password) => {\n//     const {data} = await $host.post('api/user/registration', {email, password, role: 'ADMIN'})\n//     localStorage.setItem('token', data.token)\n//     return jwt_decode(data.token)\n// }\n//\n// export const login = async (email, password) => {\n//     const {data} = await $host.post('api/user/login', {email, password})\n//     localStorage.setItem('token', data.token)\n//     return jwt_decode(data.token)\n// }\n//\n// export const check = async () => {\n//     const {data} = await $authHost.get('api/user/auth' )\n//     localStorage.setItem('token', data.token)\n//     return jwt_decode(data.token)\n// }","map":{"version":3,"sources":["/Users/nicole/form_auth/client/src/HTTP/userAPI.ts"],"names":["$authHost","$host","jwt_decode","registration","login","email","password","data","post","code","localStorage","setItem","token","loginOrEmail","decodeToken","console","log","getItem","user","id","check","get","e"],"mappings":"AAAA,SAAQA,SAAR,EAAmBC,KAAnB,QAA+B,SAA/B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAO,MAAMC,YAAY,GAAG,OAAOC,KAAP,EAAqBC,KAArB,EAAmCC,QAAnC,KAAsD;AAC9E,QAAM;AAACC,IAAAA;AAAD,MAAS,MAAMN,KAAK,CAACO,IAAN,CAAW,uBAAX,EAAoC;AAACJ,IAAAA,KAAD;AAAQC,IAAAA,KAAR;AAAcC,IAAAA;AAAd,GAApC,CAArB;;AACA,MAAIC,IAAI,CAACE,IAAL,IAAa,GAAjB,EAAqB;AACjBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAACK,KAAnC;AACA,WAAOV,UAAU,CAACK,IAAI,CAACK,KAAN,CAAjB;AACH;;AAAA;AACD,SAAQL,IAAI,CAACE,IAAb;AACH,CAPM;AASP,OAAO,MAAML,KAAK,GAAG,OAAOS,YAAP,EAA4BP,QAA5B,KAA+C;AAEhE,QAAM;AAACC,IAAAA;AAAD,MAAS,MAAMN,KAAK,CAACO,IAAN,CAAW,gBAAX,EAA6B;AAACK,IAAAA,YAAD;AAAeP,IAAAA;AAAf,GAA7B,CAArB;;AACA,MAAIC,IAAI,CAACE,IAAL,IAAa,GAAjB,EAAqB;AACjBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAACK,KAAnC;AACA,QAAIE,WAAwB,GAAGZ,UAAU,CAACK,IAAI,CAACK,KAAN,CAAzC;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYN,YAAY,CAACO,OAAb,CAAqB,OAArB,CAAZ;AAEA,WAAQ;AAACC,MAAAA,IAAI,EAAEJ,WAAW,CAACK,EAAnB;AAAuBV,MAAAA,IAAI,EAAEF,IAAI,CAACE;AAAlC,KAAR;AACH;;AAAA;AACDM,EAAAA,OAAO,CAACC,GAAR,CAAYT,IAAI,CAACK,KAAjB;AACA,SAAQL,IAAI,CAACE,IAAb;AAGH,CAdM;AAgBP,OAAO,MAAMW,KAAK,GAAG,YAAY;AAC7B,MAAI;AAEA,UAAM;AAACb,MAAAA;AAAD,QAAS,MAAMP,SAAS,CAACqB,GAAV,CAAc,eAAd,CAArB;AACAX,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAACK,KAAnC;AACA,WAAOV,UAAU,CAACK,IAAI,CAACK,KAAN,CAAjB;AAEH,GAND,CAMC,OAAOU,CAAP,EAAS;AACNP,IAAAA,OAAO,CAACC,GAAR,CAAYM,CAAZ;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;AACJ,CAXM,C,CAaP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {$authHost, $host} from \"./index\";\nimport jwt_decode from 'jwt-decode';\n\nexport const registration = async (login:string, email:string, password:string) =>{\n    const {data} = await $host.post('api/user/registration', {login, email,password});\n    if (data.code == 500){\n        localStorage.setItem('token', data.token);\n        return jwt_decode(data.token);\n    };\n    return (data.code);\n};\n\nexport const login = async (loginOrEmail:string, password:string) =>{\n\n    const {data} = await $host.post('api/user/login', {loginOrEmail, password});\n    if (data.code == 500){\n        localStorage.setItem('token', data.token);\n        let decodeToken: {id:string} = jwt_decode(data.token);\n        console.log(localStorage.getItem('token'));\n\n        return ({user: decodeToken.id, code: data.code});\n    };\n    console.log(data.token);\n    return (data.code);\n\n\n};\n\nexport const check = async () => {\n    try {\n\n        const {data} = await $authHost.get('api/user/auth' );\n        localStorage.setItem('token', data.token)\n        return jwt_decode(data.token)\n\n    }catch (e){\n        console.log(e);\n        console.log('error in userApi.Check')\n    }\n}\n\n//\n// import {$authHost, $host} from \"./index\";\n// import jwt_decode from \"jwt-decode\";\n//\n// export const registration = async (email, password) => {\n//     const {data} = await $host.post('api/user/registration', {email, password, role: 'ADMIN'})\n//     localStorage.setItem('token', data.token)\n//     return jwt_decode(data.token)\n// }\n//\n// export const login = async (email, password) => {\n//     const {data} = await $host.post('api/user/login', {email, password})\n//     localStorage.setItem('token', data.token)\n//     return jwt_decode(data.token)\n// }\n//\n// export const check = async () => {\n//     const {data} = await $authHost.get('api/user/auth' )\n//     localStorage.setItem('token', data.token)\n//     return jwt_decode(data.token)\n// }\n"]},"metadata":{},"sourceType":"module"}